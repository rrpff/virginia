{
  "name": "virginia",
  "bin": "./build/apps/server/src/index.js",
  "scripts": {
    "typecheck": "run-p 'typecheck -w packages/core' 'typecheck -w apps/server' 'typecheck -w apps/web'",
    "dev": "run-p 'dev -w apps/server' 'dev -w apps/web' 'dev -w packages/core'",
    "migrate-prisma": "npx -w apps/server prisma migrate dev",
    "migrate-new": "npx -w apps/server tsx ../../node_modules/knex/bin/cli.js migrate:make -x ts",
    "migrate-knex-not-needed": "npx -w apps/server tsx ../../node_modules/knex/bin/cli.js migrate:latest",
    "build": "run-s build:prisma ; run-p build:sources build:binary",
    "build:sources": "run-p 'build -w apps/server' 'build -w apps/web' 'build -w packages/core'",
    "build:prisma": "sed -i -e 's/node:sqlite/sqlite/g' ./node_modules/prisma/prisma-client/runtime/binary.js",
    "build:binary": "swc ./apps/server/src -d ./build -C module.type=commonjs",
    "package": "pkg -d --compress Brotli .",
    "release": "run-s build package",
    "start": "NODE_ENV=production ./binaries/virginia-arm64"
  },
  "workspaces": [
    "apps/server",
    "apps/tray",
    "apps/web",
    "packages/core",
    "packages/tsconfig"
  ],
  "devDependencies": {
    "@prisma/client": "^6.3.1",
    "@yao-pkg/pkg": "^6.3.0",
    "npm-run-all": "^4.1.5",
    "prisma": "^6.3.1"
  },
  "pkg": {
    "scripts": [
      "node_modules/prisma/**/*.js"
    ],
    "assets": [
      "apps/web/dist/**/*",
      "node_modules/.prisma/**/*",
      "node_modules/prisma/build/**/*",
      "node_modules/prisma/runtime/**/*",
      "node_modules/prisma/prisma-client/**/*",
      "node_modules/@prisma/engines/**/*",
      "node_modules/@prisma/engines/*"
    ],
    "targets": [
      "node22-macos-arm64",
      "node22-macos-x64"
    ],
    "outputPath": "./binaries"
  }
}
